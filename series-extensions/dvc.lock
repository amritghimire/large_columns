schema: '2.0'
stages:
  split:
    cmd: python split.py series.csv series-train.csv series-test.csv
    deps:
    - path: series.csv
      md5: 89e9afb028a2f682c8a9ab7de6096d11
      size: 1566
    - path: split.py
      md5: be5450939904091d9416b764dc35eb08
      size: 714
    outs:
    - path: series-test.csv
      md5: 405495810e743b30a51dddc736569a2f
      size: 484
    - path: series-train.csv
      md5: 2618e3976c5f442b3fcb3b9ee4649c0f
      size: 1082
  featurize:
    cmd: python featurize.py series-train.csv series-train-feats.csv
    deps:
    - path: featurize.py
      md5: 0996aecab04c37269ad9daf50fafe417
      size: 1518
    - path: series-train.csv
      md5: 2618e3976c5f442b3fcb3b9ee4649c0f
      size: 1082
    params:
      params.yaml:
        featurize.batch_size: 624
        featurize.columns: 54
        featurize.dense: 600
        featurize.min_split: 48
        featurize.ngrams: 8
        featurize.passes: 44
        featurize.random_state: 503000000
        featurize.seed: 238248000
        featurize.threads: 21
        featurize.weight_factor: 0.1
    outs:
    - path: series-train-feats.csv
      md5: 571b47c7d673661bed824e83f0fcfc50
      size: 440
  train:
    cmd: python train.py series-train-feats.csv model.json
    deps:
    - path: series-train-feats.csv
      md5: 571b47c7d673661bed824e83f0fcfc50
      size: 440
    - path: train.py
      md5: e649c3fbd244dd61cf9e192362d98ebd
      size: 1954
    params:
      params.yaml:
        model.batch_size: 992
        model.columns: 57
        model.epochs: 50
        model.max_features: 600
        model.min_split: 80
        model.random_state: 411000000
        model.sample: 1.0
        model.weight_factor: 0.3
        settings.folds: 12
        settings.num_est: 200
        tagging.folds: 8
        tagging.min_split: 30
        tagging.seed: 442150000
        tagging.threads: 6
        validation.batch_size: 736
        validation.layers: 2
        validation.max_features: 100
        validation.min_split: 80
        validation.ngrams: 2
        validation.num_est: 100
        validation.sample: 0.597
        validation.split: 0.21774
        validation.weight_factor: 0.1
    outs:
    - path: model.json
      md5: c2ab27176705b9bb2a4a3bd71e427bc1
      size: 1313
  evaluate:
    cmd: python evaluate.py model.json series-test.csv
    deps:
    - path: evaluate.py
      md5: dd0c5624c0e2356265d3258ea3153641
      size: 41743
    - path: model.json
      md5: c2ab27176705b9bb2a4a3bd71e427bc1
      size: 1313
    - path: series-test.csv
      md5: 405495810e743b30a51dddc736569a2f
      size: 484
    outs:
    - path: metrics.json
      md5: 217e469c06bcc5202e7ba91fd97c833c
      size: 315
