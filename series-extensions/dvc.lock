schema: '2.0'
stages:
  split:
    cmd: python split.py series.csv series-train.csv series-test.csv
    deps:
    - path: series.csv
      md5: 5aee6493cf77b44a34f7a7ed807ea349
      size: 1987
    - path: split.py
      md5: be5450939904091d9416b764dc35eb08
      size: 714
    outs:
    - path: series-test.csv
      md5: 1c510825bde3602846605ebc5e21df00
      size: 583
    - path: series-train.csv
      md5: f7b239bbda918665219cda60b1b4be26
      size: 1404
  featurize:
    cmd: python featurize.py series-train.csv series-train-feats.csv
    deps:
    - path: featurize.py
      md5: 9ec7f2e86db11aac55cfd3fa899c70f6
      size: 1519
    - path: series-train.csv
      md5: f7b239bbda918665219cda60b1b4be26
      size: 1404
    params:
      params.yaml:
        featurize.batch_size: 624
        featurize.columns: 54
        featurize.dense: 600
        featurize.min_split: 48
        featurize.ngrams: 8
        featurize.passes: 44
        featurize.random_state: 503000000
        featurize.seed: 238248000
        featurize.threads: 21
        featurize.weight_factor: 0.1
    outs:
    - path: series-train-feats.csv
      md5: bcb11e828334eff9c4c1a47238b6b6db
      size: 439
  train:
    cmd: python train.py series-train-feats.csv model.json
    deps:
    - path: series-train-feats.csv
      md5: bcb11e828334eff9c4c1a47238b6b6db
      size: 439
    - path: train.py
      md5: e649c3fbd244dd61cf9e192362d98ebd
      size: 1954
    params:
      params.yaml:
        model.batch_size: 992
        model.columns: 57
        model.epochs: 50
        model.max_features: 600
        model.min_split: 80
        model.random_state: 411000000
        model.sample: 1.0
        model.weight_factor: 0.3
        settings.folds: 12
        settings.num_est: 200
        tagging.folds: 8
        tagging.min_split: 30
        tagging.seed: 442150000
        tagging.threads: 6
        validation.batch_size: 736
        validation.layers: 2
        validation.max_features: 100
        validation.min_split: 80
        validation.ngrams: 2
        validation.num_est: 100
        validation.sample: 0.597
        validation.split: 0.21774
        validation.weight_factor: 0.1
    outs:
    - path: model.json
      md5: 1e2c76a7030587acfa0432b306d1277a
      size: 1312
  evaluate:
    cmd: python evaluate.py model.json series-test.csv
    deps:
    - path: evaluate.py
      md5: dd0c5624c0e2356265d3258ea3153641
      size: 41743
    - path: model.json
      md5: 1e2c76a7030587acfa0432b306d1277a
      size: 1312
    - path: series-test.csv
      md5: 1c510825bde3602846605ebc5e21df00
      size: 583
    outs:
    - path: metrics.json
      md5: 388f6471305876fcac8c9bf35aefa362
      size: 315
